(window.webpackJsonp=window.webpackJsonp||[]).push([[34,19],{692:function(e,t,r){"use strict";r.r(t);var n=r(20),c=(r(81),r(29),r(51),{props:{show:{type:Boolean,default:!1},editing:{type:Boolean,default:!1},currentTicket:{type:Object,default:function(){}}},data:function(){return{createTicketDialog:!1,success:null,tickets:[],ticket:{type:"General admission",price:0,limit:0}}},computed:{showDialog:{get:function(){return this.show},set:function(){this.$emit("hide")}}},mounted:function(){this.currentTicket&&(this.ticket=this.currentTicket)},methods:{handleSubmit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.editing){t.next=6;break}return t.next=4,e.$axios.put("/events/".concat(e.$route.params.event,"/tickets/").concat(e.currentTicket.id),e.ticket);case 4:t.next=8;break;case 6:return t.next=8,e.$axios.post("/events/".concat(e.$route.params.event,"/tickets"),e.ticket);case 8:e.success="You have successfully added a ticket",e.createTicketDialog=!1,e.$emit("updated"),e.$emit("hide"),setTimeout((function(){e.success=null}),5e3),t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(0),new Error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()}}}),o=r(76),l=r(99),d=r.n(l),v=r(590),m=r(589),f=r(588),k=r(695),h=r(656),_=r(661),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:"400"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[r("v-card",[r("v-card-title",[e._v(e._s(e.editing?"Update ticket information":"Add ticket to event your event"))]),e._v(" "),r("v-card-text",[r("ValidationObserver",{ref:"ticketForm",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[r("v-form",{staticClass:"mt-2",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[r("ValidationProvider",{attrs:{name:"description",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-text-field",{attrs:{"error-messages":n,outlined:"",label:"Name your ticket","auto-grow":"",rows:"1",hint:"example General admission"},model:{value:e.ticket.type,callback:function(t){e.$set(e.ticket,"type",t)},expression:"ticket.type"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"price",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-text-field",{attrs:{min:"0","error-messages":n,type:"number",label:"Price",outlined:""},model:{value:e.ticket.price,callback:function(t){e.$set(e.ticket,"price",t)},expression:"ticket.price"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"limit",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-text-field",{attrs:{"error-messages":n,hint:"0 removes the limit",min:"0",type:"number",label:"Ticket limit per user",outlined:""},model:{value:e.ticket.limit,callback:function(t){e.$set(e.ticket,"limit",t)},expression:"ticket.limit"}})]}}],null,!0)}),e._v(" "),r("v-btn",{attrs:{type:"submit",disabled:n,block:"",color:"primary"}},[e._v("\n            "+e._s(e.editing?"Update ticket":"Add ticket to event")+"\n          ")])],1)]}}])})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:v.a,VCard:m.a,VCardText:f.b,VCardTitle:f.c,VDialog:k.a,VForm:h.a,VTextField:_.a})},771:function(e,t,r){"use strict";r.r(t);var n=r(20),c=(r(29),r(81),{components:{TicketForm:r(692).default},data:function(){return{showEditing:!1,showCreating:!1,deleteDialog:!1,tickets:[]}},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/events/".concat(e.$route.params.event,"/tickets"));case 2:r=t.sent,data=r.data,e.tickets=data;case 5:case"end":return t.stop()}}),t)})))()},methods:{deleteTicket:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.delete("/events/".concat(t.$route.params.event,"/tickets/").concat(e));case 3:t.deleteDialog=!1,t.$fetch(),r.next=10;break;case 7:throw r.prev=7,r.t0=r.catch(0),new Error(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}}),o=r(76),l=r(99),d=r.n(l),v=r(590),m=r(589),f=r(588),k=r(602),h=r(695),_=r(200),w=r(604),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"mt-5",attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"8"}},[r("div",{staticClass:"ma-5"},[r("v-btn",{attrs:{rounded:"",depressed:"",color:"primary"},on:{click:function(t){e.showCreating=!0}}},[e._v("\n        Create a new ticket\n      ")]),e._v(" "),r("ticket-form",{attrs:{show:e.showCreating},on:{updated:e.$fetch,hide:function(t){e.showCreating=!1}}})],1),e._v(" "),0===e.tickets.length?r("div",{staticClass:"ma-5 text-center"},[r("h2",[e._v("You have not created any tickets for this event")])]):e._l(e.tickets,(function(t,i){return r("v-card",{key:i,staticClass:"ma-5",attrs:{rounded:"",outlined:""}},[r("v-card-text",{staticClass:"display-1"},[r("p",[e._v("\n            Description: "+e._s(t.type)+" "),r("br"),e._v("\n            Limit: "+e._s(t.limit)+" "),r("br"),e._v("\n            Price:\n            "+e._s(Intl.NumberFormat("en-US",{style:"currency",currency:"kes"}).format(t.price))+"\n          ")])]),e._v(" "),r("v-card-actions",{staticClass:"text-center"},[r("ticket-form",{attrs:{editing:!0,"current-ticket":t,show:e.showEditing},on:{updated:e.$fetch,hide:function(t){e.showEditing=!1}}}),e._v(" "),r("v-btn",{attrs:{text:"",large:"",color:"primary"},on:{click:function(t){e.showEditing=!0}}},[e._v("\n            Edit "),r("v-icon",[e._v("mdi-pencil-outline")])],1),e._v(" "),r("v-btn",{attrs:{text:"",large:"",color:"error"},on:{click:function(t){e.deleteDialog=!0}}},[e._v("\n            Delete "),r("v-icon",[e._v("mdi-delete-outline")])],1),e._v(" "),r("v-dialog",{attrs:{width:"300"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",{attrs:{rounded:""}},[r("v-card-title",[e._v("Are you sure?")]),e._v(" "),r("v-card-text",{staticClass:"body-1"},[e._v("\n                This action is irreversible\n              ")]),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{text:"",depressed:"",small:"",color:"error"},on:{click:function(r){return e.deleteTicket(t.id)}}},[e._v("\n                  Yes delete\n                ")]),e._v(" "),r("v-btn",{attrs:{text:"",depressed:"",large:"",color:"primary"},on:{click:function(t){e.deleteDialog=!1}}},[e._v("\n                  No Cancel\n                ")])],1)],1)],1)],1)],1)}))],2)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{TicketForm:r(692).default}),d()(component,{VBtn:v.a,VCard:m.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VCol:k.a,VDialog:h.a,VIcon:_.a,VRow:w.a})}}]);