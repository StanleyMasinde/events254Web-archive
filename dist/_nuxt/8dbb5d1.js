(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{703:function(e,t,r){"use strict";r.r(t);var n=r(20),o=(r(81),r(70),r(29),{data:function(){return{availableTickets:[],eventRsvp:{ticket:{},rsvp_count:1},currentEvent:{},registerDialog:!1}},computed:{ticks:function(){var e=this;return this.availableTickets.map((function(t){return{text:"".concat(t.type," - ").concat(e.formatCurrency(t.price)),value:t}}))}},methods:{confirmOrder:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/events/".concat(e.$route.params.event,"/register"),{ticket_id:e.eventRsvp.ticket.id,rsvp_count:e.eventRsvp.rsvp_count});case 3:e.$router.push("/home/tickets"),t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new Error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},formatCurrency:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Intl.NumberFormat("en-US",{style:"currency",currency:"kes"}).format(e)},showRegistrationDialog:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$auth.loggedIn||(e.$store.state.auth.redirect=e.$router.path,e.$router.push("/login")),e.registerDialog=!0,t.next=4,e.$axios.get("/events/".concat(e.$route.params.event,"/tickets"));case 4:r=t.sent,data=r.data,e.availableTickets=data;case 7:case"end":return t.stop()}}),t)})))()}}}),c=r(76),v=r(99),l=r.n(v),d=r(590),f=r(589),m=r(588),k=r(695),_=r(656),h=r(751),R=r(661),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-btn",{attrs:{rounded:"",depressed:"",color:"primary"},on:{click:e.showRegistrationDialog}},[e._v("\n    Buy tickets\n  ")]),e._v(" "),e.currentEvent.currentUserTicket?e._e():r("v-dialog",{attrs:{width:"400"},model:{value:e.registerDialog,callback:function(t){e.registerDialog=t},expression:"registerDialog"}},[r("v-card",[r("v-card-title",[e._v("Register for event")]),e._v(" "),r("v-card-text",[r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[r("v-form",[r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-select",{attrs:{"error-messages":n,label:"Select ticket",outlined:"",items:e.ticks},model:{value:e.eventRsvp.ticket,callback:function(t){e.$set(e.eventRsvp,"ticket",t)},expression:"eventRsvp.ticket"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-text-field",{attrs:{"error-messages":n,readonly:"","append-outer-icon":"mdi-plus","prepend-icon":"mdi-minus",type:"number",min:"0",label:"How many tickets?",outlined:""},on:{"click:append-outer":function(t){e.eventRsvp.rsvp_count++},"click:prepend":function(t){e.eventRsvp.rsvp_count>1&&e.eventRsvp.rsvp_count--}},model:{value:e.eventRsvp.rsvp_count,callback:function(t){e.$set(e.eventRsvp,"rsvp_count",t)},expression:"eventRsvp.rsvp_count"}})]}}],null,!0)}),e._v("\n\n            Order total:\n            "+e._s(e.formatCurrency(e.eventRsvp.ticket.price*e.eventRsvp.rsvp_count))+"\n            "),r("v-btn",{attrs:{disabled:n,color:"primary",block:""},on:{click:e.confirmOrder}},[e._v("\n              Confirm order\n            ")])],1)]}}],null,!1,540250004)})],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VBtn:d.a,VCard:f.a,VCardText:m.b,VCardTitle:m.c,VDialog:k.a,VForm:_.a,VSelect:h.a,VTextField:R.a})}}]);